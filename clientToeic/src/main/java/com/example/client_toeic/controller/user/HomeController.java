package com.example.client_toeic.controller.user;import com.example.client_toeic.dto.UserDto;import com.example.client_toeic.service.account.AccountService;import com.example.client_toeic.service.user.UserService;import com.example.client_toeic.utils.GetUser;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.security.core.Authentication;import org.springframework.security.core.annotation.AuthenticationPrincipal;import org.springframework.security.core.context.SecurityContextHolder;import org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken;import org.springframework.security.oauth2.core.user.OAuth2User;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestMapping;@Controller@RequestMapping(value = {"/client/home", "/", ""})public class HomeController {    @Autowired    private AccountService accountService;    @GetMapping()    public String home(Model model) {        model.addAttribute("currentPage", "home");        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();        if (authentication != null && authentication.getPrincipal() instanceof OAuth2User) {            OAuth2User oauth2User = (OAuth2User) authentication.getPrincipal();            String email = (String) oauth2User.getAttribute("email");            String name = (String) oauth2User.getAttribute("name");            UserDto userDto = new UserDto();            userDto.setEmail(email);            userDto.setFullName(name);            accountService.saveUserOAuth2(userDto);        }        return "/trang-chu/index";    }}